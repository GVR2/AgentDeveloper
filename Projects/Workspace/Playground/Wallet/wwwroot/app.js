const amount=document.getElementById('amount'),type=document.getElementById('type'),note=document.getElementById('note'),list=document.getElementById('list'),balanceEl=document.getElementById('balance');const KEY='wallet_v1';let items=JSON.parse(localStorage.getItem(KEY)||'[]');function fmt(n){return (Math.round(n*100)/100).toFixed(2)}function render(){list.innerHTML='';let bal=0;for(const it of items){bal+=it.type==='in'?it.amount:-it.amount;const li=document.createElement('li');li.innerHTML=`<span class="${it.type}">${it.type==='in'?'+':'-'} ${fmt(it.amount)}</span> <em>${it.note||''}</em>`;list.appendChild(li);}balanceEl.textContent=fmt(bal);}document.getElementById('add').onclick=()=>{const a=parseFloat(amount.value);if(Number.isNaN(a)||a<=0)return;items.push({amount:a,type:type.value,note:note.value.trim(),ts:Date.now()});localStorage.setItem(KEY,JSON.stringify(items));amount.value='';note.value='';render();};document.getElementById('clear').onclick=()=>{if(confirm('Очистити історію?')){items=[];localStorage.setItem(KEY,'[]');render();}};render();